<!doctype html>
<html lang="en" ng-app="myApp">

<% include head %>

<body id="StartPage">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-resource.min.js"></script>
  <script type="text/javascript" src="../js/MortiseTenonPillar.js"></script>
  <div class="container-fluid">
    <div class="jumbotron text-center">
      <!-- <h1>woodcalc</h1> -->
      <a href="/">
        <img src="/img/woodcalc.png" alt="woodcalc" width="30%">
      </a>

      <p>Specialists in wood joints calculations</p>
      <!-- <form class="form-inline">
      <input type="email" class="form-control" size="50" placeholder="Email Address" required>
      <button type="button" class="btn btn-danger">Subscribe</button>
    </form> -->

    <!-- <a href="/auth/facebook" class="btn btn-primary"><span class="fa fa-facebook"> </span> Facebook</a>
    <a href="/auth/google" class="btn btn-danger"><span class="fa fa-google"> </span> Google</a> -->
  </div>

  <!-- sección para la foto -->

  <img src="/img/MortiseTenonPillar.jpg" class="img-responsive center-block" >

  <div ng-controller="CalculoController as calculoCtrl">
    <form name="calculoForm" ng-submit = "calculoForm.$valid && calculoCtrl.sendCalculation()" novalidate>

      <!-- sección para los parametros -->

      <div class="row">
        <div class="col-xs-3">
          Strength class<br>
          <select class="form-control" selected="selected" ng-model = "calculoCtrl.calculation.woodtype" required data-toggle="tooltip" title="Structural Wood Quality">
            <% for(var i=0; i<woodtypes.length; i++) { %>
              <option value="<%= woodtypes[i] %>"><%= woodtypes[i] %></option>
              <% } %>
            </select>
          </div>
          <div class="col-xs-3">
            Nd (N)<br>
            <input class="form-control" type="number" min="0" max="10000000" ng-model="calculoCtrl.calculation.Nd" name="Nd" placeholder="Nd" required data-toggle="tooltip" title="Design value of axial force (N)"><br>
          </div>
          <div class="col-xs-3">
            b (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.b" name="b" placeholder="b" required data-toggle="tooltip" title="Contact width measured in millimeters"><br>
          </div>
          <div class="col-xs-3">
            hprime (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.hprime" name="hprime" placeholder="hprime" required data-toggle="tooltip" title="Is the contact length measured in mm (usually de depth of the pillar)"><br>
          </div>

        </div>

        <div class="row">
          <div class="col-xs-3">
            bprime (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.bprime" name="bprime" placeholder="bprime" required data-toggle="tooltip" title="Is the width of the mortise (Suggestion: b/3)"><br>
          </div>
          <div class="col-xs-3">
            lprime (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.lprime" name="lprime" placeholder="lprime" required data-toggle="tooltip" title="Is the length of the mortise (Suggestion: h'*4/5)"><br>
          </div>

          <div class="col-xs-3">
            a1 (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.a1" name="a1" placeholder="a1" required data-toggle="tooltip" title="Additional length to the effective contact length (l) parallel to the grain. The contact length, l, at each side is increased by 30 mm,but no more than a1 (see the picture for discrete support), l or l1/2."><br>
          </div>
          <div class="col-xs-3">
            a2 (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.a2" name="a2" placeholder="a2" required data-toggle="tooltip" title="Additional length to the effective contact length (l) parallel to the grain. The contact length, l, at each side is increased by 30 mm,but no more than a1 (see the picture for discrete support), l or l1/2."><br>
          </div>

        </div>


        <div class="row">
          <div class="col-xs-3">
            l1 (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.l1" name="l1" placeholder="l1" required data-toggle="tooltip" title="Distance between supports measured in millimeters"><br>
          </div>
          <div class="col-xs-3">
            h (mm)<br>
            <input class="form-control" type="number" min="0" max="100000" ng-model="calculoCtrl.calculation.h" name="h" placeholder="h" required data-toggle="tooltip" title="Depth of the member (mm)"><br>
          </div>

          <div class="col-xs-3">
            Supports<br>
            <select class="form-control" selected="selected" ng-model = "calculoCtrl.calculation.Continuous" required data-toggle="tooltip" title="Structural design">
              <option value="true">Continuous</option>
              <option value="false">Discrete</option>
            </select>
          </div>
          <div class="col-xs-3">
            Service class<br>
            <select class="form-control" selected="selected" ng-model = "calculoCtrl.calculation.service" required required data-toggle="tooltip" title="Structures shall be assigned to one of the services classes depending on its moisture content.">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </div>

        </div>

        <div class="row">
          <div  class="col-xs-3">
            Load-duration<br>
            <select class="form-control" selected="selected" ng-model = "calculoCtrl.calculation.LoadDuration" required data-toggle="tooltip" title="The load duration classes are characterised by the effect of a constant load acting for a certain period of time in the life of the structure">
              <option value="P">Permanent</option>
              <option value="L">Long-term</option>
              <option value="M">Medium-term</option>
              <option value="S">Short-term</option>
              <option value="I">Instantaneous</option>
            </select>
          </div>
          <div  class="col-xs-3">
            &gamma;<sub>M</sub><br>
            <select class="form-control" selected="selected" ng-model = "calculoCtrl.calculation.gammaM" required required data-toggle="tooltip" title="Partial factor for material properties, also acounting for model uncertainties and dimensional variations.">
              <option value="1.3">Solid timber (1.3)</option>
              <option value="1.25">Glued laminated timber (1.25)</option>
              <option value="1.2">LVL, plywood, OSB (1.2)</option>
              <option value="1.3">Particle boards (1.3)</option>
              <option value="1.3">Fibreboards hard, medium, mdf, soft (1.3)</option>
              <option value="1.3">Connections (1.3)</option>
              <option value="1.25">Punched metal plated fasteners (1.25)</option>
              <option value="1.0">Accidental combinations (1.0)</option>
            </select>
            <br>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-4">
          </div>
          <div class="col-xs-4">
            <input class="form-control" type="submit" value="Submit" ng-disabled = "!calculoForm.$valid" class="btn btn-primary btn-block"/>
          </div>
          <div class="col-xs-4">
          </div>

        </div>

        <hr>

        <h2>Result</h2>
        <div class="row" ng-style = "{'display': errVisibility}">

          <div class="col-xs-4">
          </div>
          <div class="col-xs-4">
            <div class="alert alert-danger">
              <strong>Error!</strong> {{errMsg}}.
            </div>
          </div>
          <div class="col-xs-4">
          </div>
        </div>
        <div class="row">
          <div class="col-xs-2">
            <h3><small>&sigma;<sub>C90d</sub>(N/mm<sup>2</sup>)</small></h3><br>
            <input class="form-control" ng-model="sigmaC90d" readonly data-toggle="tooltip" title="Design compressive stress perpendicular to the grain"><br>
          </div>
          <div class="col-xs-2">
            <h3><small>fc90d (N)</small></h3> <br>
            <input class="form-control" ng-model="fc90d" readonly data-toggle="tooltip" title="Design compressive strength perpendicular to the grain"><br>
          </div>
          <div class="col-xs-2">
            <h3><small>areaEf (mm<sup>2</sup>)</small></h3><br>
            <input class="form-control" ng-model="areaEf" readonly data-toggle="tooltip" title="Effective contact areaof the total contact surface"><br>
          </div>
          <div class="col-xs-2">
            <h3><small>kc90</small></h3><br>
            <input class="form-control" ng-model="kc90" readonly data-toggle="tooltip" title="Factor taking into account the load configuration, the possibility of splitting and the degree of compressive deformation."><br>
          </div>
          <div class="col-xs-4">
            <h3><small>index</small></h3><br>
            <input class="form-control" ng-model="index"  ng-style="{'background-color': myColor}" readonly data-toggle="tooltip" title="This value should be lower or equal than 1"><br>
          </div>
        </div>



      </div>
      <!-- <div> El formulario es: {{calculoForm.$valid}}</div> -->
      <br>
    </form>

  </div>
</div>
<% include footer %>

<script>
$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();
});
</script>

</body>
</xml>
